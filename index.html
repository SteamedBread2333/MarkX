<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="专业的 Markdown 编辑器，完美支持 Mermaid 图表和 KaTeX 数学公式渲染。现代化、开箱即用、功能强大。">
    <meta name="keywords" content="markdown, mermaid, katex, 数学公式, editor, 编辑器, 在线编辑器, markdown editor, math formula">
    <meta name="author" content="MarkX Team">
    <title>MarkX - 专业 Markdown + Mermaid + KaTeX 编辑器</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/images/favicon.svg?v=2">
    <link rel="apple-touch-icon" href="assets/images/favicon.svg?v=2">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://steamedbread2333.github.io/MarkX/">
    <meta property="og:title" content="MarkX - 专业 Markdown + Mermaid + KaTeX 编辑器">
    <meta property="og:description" content="现代化、开箱即用、功能强大的 Markdown 编辑器，完美支持 Mermaid 图表和 KaTeX 数学公式渲染">
    <meta property="og:image" content="assets/images/logo-banner.svg?v=2">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://steamedbread2333.github.io/MarkX/">
    <meta property="twitter:title" content="MarkX - 专业 Markdown + Mermaid + KaTeX 编辑器">
    <meta property="twitter:description" content="现代化、开箱即用、功能强大的 Markdown 编辑器，支持 Mermaid 图表和 KaTeX 数学公式">
    <meta property="twitter:image" content="assets/images/logo-banner.svg?v=2">
    
    <!-- 样式文件 -->
    <link rel="stylesheet" href="src/css/styles.css">
    
    <!-- PDF 导出库 -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" crossorigin="anonymous"></script>
    
    <!-- 外部依赖库 - 使用 CDN -->
    <!-- Highlight.js - 代码高亮 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css" id="highlight-light">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css" id="highlight-dark" disabled>
    
    <!-- KaTeX - 数学公式渲染 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>
    
    <!-- Ace Editor - 专业代码编辑器 -->
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/ace.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-markdown.js"></script>
    <!-- 常用语言模式 - 用于代码块内的自动完成 -->
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-javascript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-typescript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-python.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-java.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-c_cpp.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-css.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-html.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-json.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-xml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-sh.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-sql.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-golang.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-rust.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-php.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-ruby.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/mode-yaml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/theme-github.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/theme-one_dark.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/ext-searchbox.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.2/src-min-noconflict/ext-language_tools.js"></script>
    
    <!-- Import Maps 用于 ES 模块 -->
    <!-- 注意：Import Maps 需要现代浏览器支持（Chrome 89+, Edge 89+, Safari 16.4+, Firefox 108+） -->
    <script type="importmap">
    {
        "imports": {
            "marked": "https://cdn.jsdelivr.net/npm/marked@11.1.1/+esm",
            "dompurify": "https://cdn.jsdelivr.net/npm/dompurify@3.0.8/+esm",
            "mermaid": "https://cdn.jsdelivr.net/npm/mermaid@10.6.1/+esm",
            "highlight.js": "https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/+esm"
        }
    }
    </script>
    <!-- 浏览器兼容性检查 -->
    <script>
        // 检查浏览器是否支持 Import Maps
        if (!HTMLScriptElement.supports || !HTMLScriptElement.supports('importmap')) {
            console.warn('当前浏览器不支持 Import Maps，请使用现代浏览器（Chrome 89+, Edge 89+, Safari 16.4+, Firefox 108+）');
        }
    </script>
</head>
<body data-theme="light">
    <!-- SVG 图标库 -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol id="icon-logo" viewBox="0 0 32 32">
            <image width="32" height="32" href="assets/images/favicon.svg?v=2"/>
        </symbol>
        <symbol id="icon-new" viewBox="0 0 24 24">
            <rect x="4" y="3" width="13" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M9 3v5h5" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            <line x1="19" y1="19" x2="19" y2="16" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
            <line x1="17.5" y1="17.5" x2="20.5" y2="17.5" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-open" viewBox="0 0 24 24">
            <path d="M3 7v11a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-7l-2-2H5a2 2 0 0 0-2 2z" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            <path d="M3 7h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-save" viewBox="0 0 24 24">
            <rect x="4" y="4" width="16" height="16" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
            <rect x="8" y="4" width="8" height="5" fill="currentColor"/>
            <rect x="8" y="14" width="8" height="3" rx="0.5" fill="currentColor"/>
            <circle cx="12" cy="16" r="0.8" fill="var(--icon-bg, #fff)"/>
        </symbol>
        <symbol id="icon-bold" viewBox="0 0 24 24">
            <path d="M7 5h7a4 4 0 0 1 0 8H7V5z" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linejoin="round"/>
            <path d="M7 13h8a4 4 0 0 1 0 8H7v-8z" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-italic" viewBox="0 0 24 24">
            <line x1="10" y1="6" x2="14" y2="6" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
            <line x1="10" y1="18" x2="14" y2="18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
            <line x1="13" y1="6" x2="11" y2="18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-heading" viewBox="0 0 24 24">
            <line x1="6" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
            <line x1="18" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
            <line x1="6" y1="12" x2="18" y2="12" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-link" viewBox="0 0 24 24">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-image" viewBox="0 0 24 24">
            <rect x="3" y="3" width="18" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/>
            <path d="M21 15l-5-5L5 21" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-code" viewBox="0 0 24 24">
            <polyline points="16 18 22 12 16 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <polyline points="8 6 2 12 8 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-table" viewBox="0 0 24 24">
            <rect x="3" y="3" width="18" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
            <line x1="3" y1="9" x2="21" y2="9" stroke="currentColor" stroke-width="2"/>
            <line x1="3" y1="15" x2="21" y2="15" stroke="currentColor" stroke-width="2"/>
            <line x1="9" y1="3" x2="9" y2="21" stroke="currentColor" stroke-width="2"/>
            <line x1="15" y1="9" x2="15" y2="21" stroke="currentColor" stroke-width="2"/>
        </symbol>
        <symbol id="icon-chart" viewBox="0 0 24 24">
            <polyline points="3 20 9 14 13 18 21 10" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="9" cy="14" r="2" fill="currentColor"/>
            <circle cx="13" cy="18" r="2" fill="currentColor"/>
            <circle cx="21" cy="10" r="2" fill="currentColor"/>
        </symbol>
        <symbol id="icon-formula" viewBox="0 0 24 24">
            <text x="3" y="18" font-family="serif" font-size="16" font-style="italic" fill="currentColor" font-weight="bold">f</text>
            <text x="10" y="10" font-family="serif" font-size="10" fill="currentColor">x</text>
            <path d="M9 14 L14 14" stroke="currentColor" stroke-width="1.5"/>
            <text x="9" y="21" font-family="serif" font-size="10" fill="currentColor">y</text>
            <path d="M16 8 Q18 10 20 8 Q18 6 16 8" fill="none" stroke="currentColor" stroke-width="1.5"/>
            <path d="M18 15 L22 11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M18 11 L22 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-layout" viewBox="0 0 24 24">
            <rect x="3" y="3" width="18" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
            <line x1="12" y1="3" x2="12" y2="21" stroke="currentColor" stroke-width="2"/>
        </symbol>
        <symbol id="icon-theme-dark" viewBox="0 0 24 24">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="currentColor"/>
        </symbol>
        <symbol id="icon-theme-light" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="5" fill="currentColor"/>
            <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-more" viewBox="0 0 24 24">
            <circle cx="12" cy="6" r="2" fill="currentColor"/>
            <circle cx="12" cy="12" r="2" fill="currentColor"/>
            <circle cx="12" cy="18" r="2" fill="currentColor"/>
        </symbol>
        <symbol id="icon-download" viewBox="0 0 24 24">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <polyline points="7 10 12 15 17 10" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-image-download" viewBox="0 0 24 24">
            <rect x="3" y="3" width="18" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/>
            <path d="M21 15l-5-5L5 21" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-fullscreen" viewBox="0 0 24 24">
            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-zoom-in" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="m21 21-4.35-4.35" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="11" y1="8" x2="11" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="8" y1="11" x2="14" y2="11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-zoom-out" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="m21 21-4.35-4.35" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="8" y1="11" x2="14" y2="11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-reset-alt" viewBox="0 0 24 24">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 3v5h-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M3 21v-5h5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </symbol>
        <symbol id="icon-close" viewBox="0 0 24 24">
            <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </symbol>
        <symbol id="icon-github" viewBox="0 0 24 24">
            <path fill="currentColor" d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </symbol>
        <symbol id="icon-help" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="17" r="1" fill="currentColor"/>
        </symbol>
    </svg>

    <!-- GitHub 角标 -->
    <a href="https://github.com/steamedbread2333/MarkX" target="_blank" rel="noopener noreferrer" class="github-corner" aria-label="View source on GitHub">
        <svg height="32" aria-hidden="true" viewBox="0 0 24 24" version="1.1" width="32" data-view-component="true" class="octicon octicon-mark-github v-align-middle">
            <path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path>
        </svg>
    </a>

    <!-- 顶部工具栏 -->
    <header class="toolbar">
        <div class="toolbar-left">
            <h1 class="logo">
                <svg class="logo-icon"><use href="#icon-logo"></use></svg>
                <span>MarkX</span>
            </h1>
            <div class="toolbar-divider"></div>
            
            <!-- 文件操作 -->
            <button class="toolbar-btn" id="newBtn" title="新建文档 (Ctrl+N)">
                <svg class="icon"><use href="#icon-new"></use></svg>
                <span class="text">新建</span>
            </button>
            <button class="toolbar-btn" id="openBtn" title="打开文件 (Ctrl+O)">
                <svg class="icon"><use href="#icon-open"></use></svg>
                <span class="text">打开</span>
            </button>
            <button class="toolbar-btn" id="saveBtn" title="保存文件 (Ctrl+S)">
                <svg class="icon"><use href="#icon-save"></use></svg>
                <span class="text">保存</span>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Markdown 格式化工具 -->
            <button class="toolbar-btn" id="boldBtn" title="加粗 (Ctrl+B)">
                <svg class="icon"><use href="#icon-bold"></use></svg>
            </button>
            <button class="toolbar-btn" id="italicBtn" title="斜体 (Ctrl+I)">
                <svg class="icon"><use href="#icon-italic"></use></svg>
            </button>
            <button class="toolbar-btn" id="headingBtn" title="标题">
                <svg class="icon"><use href="#icon-heading"></use></svg>
            </button>
            <button class="toolbar-btn" id="linkBtn" title="链接 (Ctrl+K)">
                <svg class="icon"><use href="#icon-link"></use></svg>
            </button>
            <button class="toolbar-btn" id="imageBtn" title="图片">
                <svg class="icon"><use href="#icon-image"></use></svg>
            </button>
            <button class="toolbar-btn" id="codeBtn" title="代码块">
                <svg class="icon"><use href="#icon-code"></use></svg>
            </button>
            <button class="toolbar-btn" id="tableBtn" title="表格">
                <svg class="icon"><use href="#icon-table"></use></svg>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Mermaid 模板 -->
            <div class="dropdown">
                <button class="toolbar-btn" id="mermaidBtn" title="Mermaid 图表">
                    <svg class="icon"><use href="#icon-chart"></use></svg>
                    <span class="text">图表</span>
                </button>
                <div class="dropdown-content">
                    <button class="dropdown-item" data-mermaid="flowchart">流程图</button>
                    <button class="dropdown-item" data-mermaid="sequence">时序图</button>
                    <button class="dropdown-item" data-mermaid="gantt">甘特图</button>
                    <button class="dropdown-item" data-mermaid="class">类图</button>
                    <button class="dropdown-item" data-mermaid="state">状态图</button>
                </div>
            </div>
            
            <!-- 数学公式 -->
            <div class="dropdown">
                <button class="toolbar-btn" id="mathBtn" title="数学公式 (KaTeX)">
                    <svg class="icon"><use href="#icon-formula"></use></svg>
                    <span class="text">公式</span>
                </button>
                <div class="dropdown-content">
                    <button class="dropdown-item" data-math="inline">行内公式 $x$</button>
                    <button class="dropdown-item" data-math="block">块级公式 $$x$$</button>
                    <button class="dropdown-item" data-math="fraction">分数 $\frac{a}{b}$</button>
                    <button class="dropdown-item" data-math="sqrt">根号 $\sqrt{x}$</button>
                    <button class="dropdown-item" data-math="sum">求和 $\sum$</button>
                    <button class="dropdown-item" data-math="integral">积分 $\int$</button>
                    <button class="dropdown-item" data-math="limit">极限 $\lim$</button>
                    <button class="dropdown-item" data-math="matrix">矩阵</button>
                </div>
            </div>
        </div>
        
        <div class="toolbar-right">
            <!-- 帮助文档 -->
            <button class="toolbar-btn" id="helpBtn" title="快捷键和帮助">
                <svg class="icon"><use href="#icon-help"></use></svg>
            </button>
            
            <!-- 视图切换 -->
            <button class="toolbar-btn" id="layoutBtn" title="切换布局">
                <svg class="icon"><use href="#icon-layout"></use></svg>
            </button>
            
            <!-- 主题切换 -->
            <button class="toolbar-btn" id="themeBtn" title="切换主题">
                <svg class="icon"><use href="#icon-theme-dark"></use></svg>
            </button>
            
            <!-- 更多选项 -->
            <div class="dropdown">
                <button class="toolbar-btn" title="更多">
                    <svg class="icon"><use href="#icon-more"></use></svg>
                </button>
                <div class="dropdown-content dropdown-right">
                    <button class="dropdown-item" id="exportPdfDefaultBtn">导出 PDF（默认）</button>
                    <button class="dropdown-item" id="exportPdfFullPageBtn">导出 PDF（整张）</button>
                    <button class="dropdown-item" id="exportPdfBtn">导出 PDF（智能分页）🚧</button>
                    <button class="dropdown-item" id="exportHtmlBtn">导出 HTML</button>
                    <button class="dropdown-item" id="copyMdBtn">复制 Markdown</button>
                    <button class="dropdown-item" id="copyHtmlBtn">复制 HTML</button>
                    <button class="dropdown-item" id="clearBtn">清空内容</button>
                </div>
            </div>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="main-content">
        <!-- 编辑器区域 -->
        <div class="editor-container" id="editorContainer">
            <!-- CodeMirror 编辑器挂载点 -->
            <div id="editor" class="editor"></div>
            <textarea 
                id="editorTextarea" 
                style="display: none;" 
                placeholder="# 欢迎使用 MarkX！

现代化的 Markdown 编辑器，支持 **Mermaid 图表** 和 **KaTeX 数学公式**！

## ✨ 特色功能

- ✅ 实时预览
- ✅ Mermaid 图表支持
- ✅ KaTeX 数学公式
- ✅ 代码高亮
- ✅ 暗色/亮色主题
- ✅ 文件导入导出
- ✅ 自动保存草稿

---

## 📊 Mermaid 图表示例

点击工具栏的「图表」按钮快速插入模板！

```mermaid
graph TD
    A[开始] --> B{是否喜欢?}
    B -->|是| C[太棒了!]
    B -->|否| D[试试其他功能]
    C --> E[分享给朋友]
    D --> E
```

---

## 🧮 数学公式示例

点击工具栏的「公式」按钮快速插入模板！

**行内公式**：质能方程 $E = mc^2$，勾股定理 $a^2 + b^2 = c^2$

**块级公式**：

$$
x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
$$

$$
\sum_{i=1}^{n} i = \frac{n(n+1)}{2}
$$

---

试试编辑内容，右侧会实时更新！🚀"
                spellcheck="false"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="off"></textarea>
        </div>

        <!-- 预览区域 -->
        <div class="preview-container" id="previewContainer">
            <div id="preview" class="preview markdown-body"></div>
        </div>
    </main>

    <!-- 底部状态栏 -->
    <footer class="statusbar">
        <div class="statusbar-left">
            <span id="statusMessage">就绪</span>
        </div>
        <div class="statusbar-right">
            <span id="charCount">0 字符</span>
            <span class="statusbar-divider">|</span>
            <span id="wordCount">0 词</span>
            <span class="statusbar-divider">|</span>
            <span id="lineCount">0 行</span>
            <span class="statusbar-divider">|</span>
            <span id="readTime">预计阅读 1 分钟</span>
        </div>
    </footer>

    <!-- 文件上传隐藏输入 -->
    <input type="file" id="fileInput" accept=".md,.markdown,.txt" style="display: none;">

    <!-- 帮助文档模态框 -->
    <div id="helpModal" class="help-modal" style="display: none;">
        <div class="help-modal-content">
            <div class="help-modal-header">
                <h2>📚 快捷键与自动完成</h2>
                <button class="help-modal-close" id="helpModalClose">
                    <svg class="icon"><use href="#icon-close"></use></svg>
                </button>
            </div>
            <div class="help-modal-body">
                <div class="help-section">
                    <h3>⌨️ 快捷键</h3>
                    <div class="help-shortcuts">
                        <div class="help-shortcut-item">
                            <div class="help-shortcut-keys">
                                <kbd>Ctrl</kbd> + <kbd>S</kbd>
                            </div>
                            <div class="help-shortcut-desc">保存文件</div>
                        </div>
                        <div class="help-shortcut-item">
                            <div class="help-shortcut-keys">
                                <kbd>Ctrl</kbd> + <kbd>O</kbd>
                            </div>
                            <div class="help-shortcut-desc">打开文件</div>
                        </div>
                        <div class="help-shortcut-item">
                            <div class="help-shortcut-keys">
                                <kbd>Ctrl</kbd> + <kbd>N</kbd>
                            </div>
                            <div class="help-shortcut-desc">新建文档</div>
                        </div>
                        <div class="help-shortcut-item">
                            <div class="help-shortcut-keys">
                                <kbd>Ctrl</kbd> + <kbd>B</kbd>
                            </div>
                            <div class="help-shortcut-desc">加粗文本</div>
                        </div>
                        <div class="help-shortcut-item">
                            <div class="help-shortcut-keys">
                                <kbd>Ctrl</kbd> + <kbd>I</kbd>
                            </div>
                            <div class="help-shortcut-desc">斜体文本</div>
                        </div>
                        <div class="help-shortcut-item">
                            <div class="help-shortcut-keys">
                                <kbd>Ctrl</kbd> + <kbd>K</kbd>
                            </div>
                            <div class="help-shortcut-desc">插入链接</div>
                        </div>
                        <div class="help-shortcut-item">
                            <div class="help-shortcut-keys">
                                <kbd>Ctrl</kbd> + <kbd>E</kbd>
                            </div>
                            <div class="help-shortcut-desc">手动触发自动完成</div>
                        </div>
                    </div>
                    <div class="help-note">
                        <strong>提示：</strong>在 Mac 上，<kbd>Ctrl</kbd> 键对应 <kbd>Cmd</kbd> 键
                    </div>
                </div>
                
                <div class="help-section">
                    <h3>✨ 自动完成功能</h3>
                    <div class="help-autocomplete">
                        <div class="help-autocomplete-item">
                            <div class="help-autocomplete-title">🎯 智能提示</div>
                            <div class="help-autocomplete-desc">
                                输入 Markdown 语法关键词时，会自动显示相关模板和快捷方式。
                                支持标题、列表、表格、代码块、链接、图片等多种语法。
                            </div>
                        </div>
                        <div class="help-autocomplete-item">
                            <div class="help-autocomplete-title">🔤 特殊字符触发</div>
                            <div class="help-autocomplete-desc">
                                输入特殊字符（如 <code>#</code>、<code>*</code>、<code>[</code>、<code>`</code> 等）时，
                                会自动显示相关的自动完成选项。
                            </div>
                        </div>
                        <div class="help-autocomplete-item">
                            <div class="help-autocomplete-title">📦 块内编辑</div>
                            <div class="help-autocomplete-desc">
                                在代码块或引用块内编辑时，自动完成会智能过滤，只显示与该块相关的选项。
                                按 <kbd>Ctrl+E</kbd>（Mac: <kbd>Cmd+E</kbd>）可手动触发自动完成。
                            </div>
                        </div>
                        <div class="help-autocomplete-item">
                            <div class="help-autocomplete-title">🎨 使用技巧</div>
                            <div class="help-autocomplete-desc">
                                <ul>
                                    <li>使用方向键 <kbd>↑</kbd> <kbd>↓</kbd> 选择选项</li>
                                    <li>按 <kbd>Enter</kbd> 确认选择</li>
                                    <li>按 <kbd>Tab</kbd> 跳转到下一个占位符</li>
                                    <li>按 <kbd>Esc</kbd> 关闭自动完成菜单</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 主应用脚本 -->
    <script type="module" src="src/app.js"></script>
</body>
</html>

